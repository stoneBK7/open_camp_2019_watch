Googleドキュメントにボタン機能について詳しくご説明したものを共有しておりますので、こちらも活用下さい(2019/05/20)
https://docs.google.com/document/d/1_mpYSjprAOt95W6jEqQIcVKBOab1wrbUCDV1SY6GOD8/edit?usp=sharing

# ワークショップ2 時計を作ってみよう

## 概要
これは「オープンキャンプ in 南島原 2019」のワークショップで実施する課題の内容です。

## ステップ1
テキストビューを`00:00:00`の表示形式になるように変更しましょう。

## ステップ2
開始ボタンと停止ボタンを配置しましょう。

#### ヒント1 ボタンの宣言の仕方
ボタンもテキストビューの時と同じ(ワークショップ1を参照)ように、以下の様に宣言します。

```
val startButton = findViewById<Button>(R.id.start_button)
```

## ステップ3
ボタンをクリックした時のイベントを実装しましょう。<br>

#### ヒント1 イベントの実装の仕方

```
stopButton.setOnClickListener {
  // 処理
}
```
・`stopButton`ステップ1で宣言した変数を利用する<br>
・`setOnClickListener`は、ボタンをクリックした時のイベントのことを意味する。

## ステップ4
ログを出力してボタンをクリックした時の処理が実行されるかを確認してみましょう。

#### ヒント1 ログの出力の仕方
以下は、Infomation(情報)を意味するログを出力する例です。
他にも、エラーや警告を意味するログの出力の仕方がありますが、ワークショップでは詳しく扱いません。

```
Log.i("タイトルです。", "ログの詳細を記述します。")
```

## ステップ5
現在時刻を取得してみましょう。


#### ヒント1 日時情報の取得方法
標準で用意されている`Date()`クラスを利用します。<br>
日時情報は、システムの都合が良いように保持されているため、そのまま表示してしまうと無意味に見える数字(タイムスタンプ)が見えてしまいます。<br>
そのため、2行目に書いている`SimpleDateFormat`を使って人が普段慣れ親しんでいる形式に変換する必要があります。

```
val date = Date()
val format = SimpleDateFormat("HH:mm:ss", Locale.getDefault())
print(format.format(date))
```

#### ヒント2 関数の使い方
関数は以下の形式で記述します。

```
private fun 関数名(引数: データ型): 戻り値データ型 {
  // 処理
}
```
・`private`は、関数を宣言したクラスからのみしか呼び出すことができないプログラムです。
・関数は、関数に渡す「引数」と処理結果を呼び出し元に戻す「戻り値」を定義することができます。
・関数は、ある処理を他から呼び出す時に簡易的に呼び出す為のものです。

## ステップ6
取得した時刻をテキストビューに表示してみましょう。

## ステップ7
ステップ6までだとボタンを押さない限り時刻が更新されません。
これを1秒間隔で更新して表示することで時計っぽく動いてくれるようにする必要があります。

#### ヒント1 ある間隔で処理を実行して画面を更新する方法
プログラムの世界では処理を繰り返す場合、For文やWhile文などを利用します。
Andoroidアプリを作成する際は、繰り返し行う処理などは非同期で裏側で処理を来ない任意のタイミングで画面側に情報を送信する必要があります。
そのお作法を実現する方法が以下のコードになります。

```
val runnable = object : Runnable {
  override fun run() {
      // 処理
      handler.postDelayed(this, 1000)
  }
}
```
・非同期処理を実現するためには、いくつか方法がありますが今回は`Runnable`を利用します。
・`handler.postDelayed`は、指定した時間だけ待機して`this`は自分自身の事を意味しており、つまり`run()`のことを指します。
　この仕組みを実装することで1秒間隔で繰り返す仕組みを作ることができます。


## ステップ8
これで定期的に処理を実行することができました。
次は、定期的に実行している処理を停止ボタンで止めてみましょう。

#### ヒント1 非同期で実行している処理を止める方法
ステップ7で実行した非同期処理を止める方法は、以下のコードを実装することで実現することができます。

```
handler.removeCallbacks(runnable)
```
